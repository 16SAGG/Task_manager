{% extends 'layout.html' %}

{% block title%}{{myTask.title}} - Task{% endblock %}

    {% block content %}
    <div class="row justify-content-center">
        <form action="{% if taskDetail %} {% url 'taskDetail' myTask.id %} {% else %} {% url 'createTasks' %} {% endif %}" method="POST" class="col-7">   
                {{advice}}
                {% csrf_token %}
                <div class="mb-3">
                    {% if taskDetail %} <!--This code only run through taskDetail-->
                        <input type="text" name="title" id="title" class="h1" style="border: 0; outline: none;" placeholder="Untitled"; value="{{myTask.title}}">
                    {% else %} <!--This code only run through createTask-->
                        <input type="text" name="title" id="title" class="h1" style="border: 0; outline: none;" placeholder="Untitled">
                    {% endif %}
                </div>
                <div class="mb-3">
                    <div class="row align-items-start my-2">
                        <div class="col">
                            <div class="row">
                                <label for="status" class="fs-6 text-secondary">Status</label>
                            </div>
                            <div class="row">
                                <label for="deadline" class="fs-6 text-secondary">Deadline</label>
                            </div>
                            <div class="row">
                                <label for="priority" class="fs-6 text-secondary">Priority</label>
                            </div>
                        </div> 
                        <div class="col">
                            <div class="row">
                                <select name="status" class="fs-6" style="border: 0; outline: none" id="status">
                                    {% for status in myStatus %}
                                        {% if taskDetail %} <!--This code only run through taskDetail-->
                                            {% if myTask.status.id == status.id %}
                                                <option value="{{status.id}}" selected>{{status.title}}</option>
                                            {% else %}
                                                <option value="{{status.id}}">{{status.title}}</option>
                                            {% endif %}
                                        {% else %} <!--This code only run through createTask-->
                                            <option value="{{status.id}}">{{status.title}}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                                <select name="deadline" class="fs-6" style="border: 0; outline: none" id="deadline">
                                    {% for val, desc in deadlineChoices %}
                                        {% if taskDetail %} <!--This code only run through taskDetail-->
                                            {% if myTask.deadline == val %}
                                                <option value="{{val}}" selected>{{desc}}</option>
                                            {% else %}
                                                <option value="{{val}}">{{desc}}</option>
                                            {% endif %}
                                        {% else %} <!--This code only run through createTask-->
                                            <option value="{{val}}">{{desc}}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                                <select name="priority" class="fs-6" style="border: 0; outline: none" id="priority">
                                    {% for val, desc in priorityChoices %}
                                        {% if taskDetail %} <!--This code only run through taskDetail-->
                                            {% if myTask.priority == val %}
                                                <option value="{{val}}" selected>{{desc}}</option>
                                            {% else %}
                                                <option value="{{val}}">{{desc}}</option>
                                            {% endif %}
                                        {% else %} <!--This code only run through createTask-->
                                            <option value="{{val}}">{{desc}}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </div>
                        </div> 
                    </div>
                </div>
                <hr>
            <div class="mb-3">
                <textarea name="description" id="description" class="fs-5 tsk-input" style="border: 0; outline: none; width: 100%; height: 9em; resize:none;" placeholder="Description">{% if taskDetail %}{{myTask.description}}{% endif %}</textarea>
            </div>
            <hr>
            <div class="d-grid gap-2 d-md-flex justify-content-center">
                <button class="btn btn-dark" style="width: 10em;">{% if taskDetail %}Update{% else %}Create{% endif %}</button>
            </div>
        </form>
    </div>
    {% endblock %}
